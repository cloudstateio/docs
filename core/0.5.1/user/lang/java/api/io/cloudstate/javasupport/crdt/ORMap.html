<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ORMap</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ORMap";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/cloudstate/javasupport/crdt/LWWRegisterMap.html" title="class in io.cloudstate.javasupport.crdt"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/cloudstate/javasupport/crdt/ORSet.html" title="interface in io.cloudstate.javasupport.crdt"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/cloudstate/javasupport/crdt/ORMap.html" target="_top">Frames</a></li>
<li><a href="ORMap.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.cloudstate.javasupport.crdt</div>
<h2 title="Interface ORMap" class="title">Interface ORMap&lt;K,V extends <a href="../../../../io/cloudstate/javasupport/crdt/Crdt.html" title="interface in io.cloudstate.javasupport.crdt">Crdt</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>K</code> - The type of keys.</dd>
<dd><code>V</code> - The CRDT to be used for values.</dd>
</dl>
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../io/cloudstate/javasupport/crdt/Crdt.html" title="interface in io.cloudstate.javasupport.crdt">Crdt</a>, java.util.Map&lt;K,V&gt;</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">ORMap&lt;K,V extends <a href="../../../../io/cloudstate/javasupport/crdt/Crdt.html" title="interface in io.cloudstate.javasupport.crdt">Crdt</a>&gt;</span>
extends <a href="../../../../io/cloudstate/javasupport/crdt/Crdt.html" title="interface in io.cloudstate.javasupport.crdt">Crdt</a>, java.util.Map&lt;K,V&gt;</pre>
<div class="block">An Observed-Removed Map.

 <p>An Observed-Removed Map allows both the addition and removal of objects in a map. A removal
 can only be done if all of the additions that caused the key to be in the map have been seen by
 this node. This means that, for example, if node 1 adds key A, and node 2 also adds key A, then
 node 1's addition is replicated to node 3, and node 3 deletes it before node 2's addition is
 replicated, then the item will still be in the map because node 2's addition had not yet been
 observed by node 3. However, if both additions had been replicated to node 3, then the key will
 be removed.

 <p>The values of the map are themselves CRDTs, and hence allow concurrent updates that will
 eventually converge. Values may only be inserted using the <a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html#getOrCreate-K-java.util.function.Function-"><code>getOrCreate(Object,
 Function)</code></a> function, using the <a href="../../../../io/cloudstate/javasupport/crdt/CrdtFactory.html" title="interface in io.cloudstate.javasupport.crdt"><code>CrdtFactory</code></a> passed in to the creation callback. Invoking
 <a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html#put-K-V-"><code>put(Object, Crdt)</code></a> or any other insertion method will throw a <code>UnsupportedOperationException</code>.

 <p>While removing entries from the map is supported, if the entries are added back again, it is
 possible that the value of the deleted entry may be merged into the value of the current entry,
 depending on whether the removal has been replicated to all nodes before the addition is
 performed.

 <p>The map may contain different CRDT types as values, however, for a given key, the type must
 never change. If two different types for the same key are inserted on different nodes, the CRDT
 will enter an invalid state that can never be merged, and behavior of the CRDT is undefined.

 <p>Care needs to be taken to ensure that the serialized value of keys in the set is stable. For
 example, if using protobufs, the serialized value of any maps contained in the protobuf is not
 stable, and can yield a different set of bytes for the same logically equal element. Hence maps
 should be avoided. Additionally, some changes in protobuf schemas which are backwards compatible
 from a protobuf perspective, such as changing from sint32 to int32, do result in different
 serialized bytes, and so must be avoided.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.java.util.Map">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;java.util.Map</h3>
<code>java.util.Map.Entry&lt;K,V&gt;</code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html#getOrCreate-K-java.util.function.Function-">getOrCreate</a></span>(<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">K</a>&nbsp;key,
           java.util.function.Function&lt;<a href="../../../../io/cloudstate/javasupport/crdt/CrdtFactory.html" title="interface in io.cloudstate.javasupport.crdt">CrdtFactory</a>,<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a>&gt;&nbsp;create)</code>
<div class="block">Get or create an entry in the map with the given key.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default <a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html#put-K-V-">put</a></span>(<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">K</a>&nbsp;key,
   <a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a>&nbsp;value)</code>
<div class="block">Not supported on ORMap.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.util.Map">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.util.Map</h3>
<code>clear, compute, computeIfAbsent, computeIfPresent, containsKey, containsValue, entrySet, equals, forEach, get, getOrDefault, hashCode, isEmpty, keySet, merge, putAll, putIfAbsent, remove, remove, replace, replace, replaceAll, size, values</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getOrCreate-java.lang.Object-java.util.function.Function-">
<!--   -->
</a><a name="getOrCreate-K-java.util.function.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreate</h4>
<pre><a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a>&nbsp;getOrCreate(<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">K</a>&nbsp;key,
              java.util.function.Function&lt;<a href="../../../../io/cloudstate/javasupport/crdt/CrdtFactory.html" title="interface in io.cloudstate.javasupport.crdt">CrdtFactory</a>,<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a>&gt;&nbsp;create)</pre>
<div class="block">Get or create an entry in the map with the given key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key of the entry.</dd>
<dd><code>create</code> - A callback used to create the value using the given <a href="../../../../io/cloudstate/javasupport/crdt/CrdtFactory.html" title="interface in io.cloudstate.javasupport.crdt"><code>CrdtFactory</code></a> if an
     entry for the key is not currently in the map.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The existing or newly created value for the given key.</dd>
</dl>
</li>
</ul>
<a name="put-java.lang.Object-io.cloudstate.javasupport.crdt.Crdt-">
<!--   -->
</a><a name="put-K-V-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>put</h4>
<pre>default&nbsp;<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a>&nbsp;put(<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">K</a>&nbsp;key,
              <a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a>&nbsp;value)</pre>
<div class="block">Not supported on ORMap. Use <a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html#getOrCreate-K-java.util.function.Function-"><code>getOrCreate(Object, Function)</code></a> instead.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>put</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">K</a>,<a href="../../../../io/cloudstate/javasupport/crdt/ORMap.html" title="type parameter in ORMap">V</a> extends <a href="../../../../io/cloudstate/javasupport/crdt/Crdt.html" title="interface in io.cloudstate.javasupport.crdt">Crdt</a>&gt;</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/cloudstate/javasupport/crdt/LWWRegisterMap.html" title="class in io.cloudstate.javasupport.crdt"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/cloudstate/javasupport/crdt/ORSet.html" title="interface in io.cloudstate.javasupport.crdt"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/cloudstate/javasupport/crdt/ORMap.html" target="_top">Frames</a></li>
<li><a href="ORMap.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
