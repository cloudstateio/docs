<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Forwarding and effects · Cloudstate</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='Cloudstate Documentation'/>
<link rel="canonical" href="https://cloudstate.io/docs/user/features/effects.html"/>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,700,700i&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>

<!-- OneTrust Cookies Consent Notice start -->
<script type="text/javascript">
(function(w,d,s){if(w.location.protocol!="file:"){var f=d.getElementsByTagName(s)[0],j=d.createElement(s);
j.async=true;j.src="https://optanon.blob.core.windows.net/consent/a14b53db-7715-45da-be81-7fd0cafc385d.js";
j.charset="UTF-8";f.parentNode.insertBefore(j,f);}})(window,document,"script");</script>
<!-- OneTrust Cookies Consent Notice end -->

<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WWL9BXX');</script>
<!-- End Google Tag Manager -->

<script type="text/javascript" src="../../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../js/page.js"></script>
<script type="text/javascript" src="../../js/warnOldVersion.js"></script>
<script type="text/javascript" src="../../js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="../../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../../css/page.css"/>

<link rel="icon" type="image/x-icon" href="../../../favicon.ico">
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../../index.html" >
<img src="../../images/cloudstate-horizontal-color.svg" alt="Cloudstate"/>
</a>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../../user/index.html" class="page">Using Cloudstate</a>
  <ul>
    <li><a href="../../user/quickstart.html" class="page">Quickstart</a></li>
    <li><a href="../../user/features/index.html" class="page">Overview</a>
    <ul>
      <li><a href="../../user/features/grpc.html" class="page">gRPC descriptors</a></li>
      <li><a href="../../user/features/eventsourced.html" class="page">Event sourcing</a></li>
      <li><a href="../../user/features/crdts.html" class="page">Conflict-free Replicated Data Types</a></li>
      <li><a href="../../user/features/effects.html" class="active page">Forwarding and effects</a></li>
    </ul></li>
    <li><a href="../../user/lang/index.html" class="page">Languages</a>
    <ul>
      <li><a href="../../user/lang/javascript/index.html" class="page">JavaScript</a></li>
      <li><a href="../../user/lang/java/index.html" class="page">Java</a></li>
      <li><a href="../../user/lang/go/index.html" class="page">Go</a></li>
    </ul></li>
    <li><a href="../../user/deployment/index.html" class="page">Deploying applications</a>
    <ul>
      <li><a href="../../user/deployment/installing.html" class="page">Installing</a></li>
      <li><a href="../../user/deployment/deploying.html" class="page">Deploying a stateful service</a></li>
      <li><a href="../../user/deployment/stores/index.html" class="page">Stateful stores</a></li>
      <li><a href="../../user/deployment/monitoring.html" class="page">Monitoring</a></li>
      <li><a href="../../user/deployment/autoscaling.html" class="page">Autoscaling</a></li>
      <li><a href="../../user/deployment/security.html" class="page">Security</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../spec/index.html" class="page">Protocol Specification</a></li>
  <li><a href="../../developer/index.html" class="page">Content for developers of Cloudstate</a>
  <ul>
    <li><a href="../../developer/thebuild.html" class="page">The Cloudstate Build</a></li>
    <li><a href="../../developer/language-support/index.html" class="page">Language support</a>
    <ul>
      <li><a href="../../developer/language-support/serialization.html" class="page">Cloudstate serialization convention</a></li>
    </ul></li>
  </ul></li>
</ul>
</div>
</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="../../.."><img src="../../images/cloudstate-horizontal-white.svg" alt="Cloudstate"/></a></div>
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column site-nav-container">
<nav class="site-nav">
<div class="nav-home">
<a href="../../index.html" >
<img src="../../images/cloudstate-horizontal-color.svg" alt="Cloudstate"/>
</a>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../../user/index.html" class="page">Using Cloudstate</a>
  <ul>
    <li><a href="../../user/quickstart.html" class="page">Quickstart</a></li>
    <li><a href="../../user/features/index.html" class="page">Overview</a>
    <ul>
      <li><a href="../../user/features/grpc.html" class="page">gRPC descriptors</a></li>
      <li><a href="../../user/features/eventsourced.html" class="page">Event sourcing</a></li>
      <li><a href="../../user/features/crdts.html" class="page">Conflict-free Replicated Data Types</a></li>
      <li><a href="../../user/features/effects.html" class="active page">Forwarding and effects</a></li>
    </ul></li>
    <li><a href="../../user/lang/index.html" class="page">Languages</a>
    <ul>
      <li><a href="../../user/lang/javascript/index.html" class="page">JavaScript</a></li>
      <li><a href="../../user/lang/java/index.html" class="page">Java</a></li>
      <li><a href="../../user/lang/go/index.html" class="page">Go</a></li>
    </ul></li>
    <li><a href="../../user/deployment/index.html" class="page">Deploying applications</a>
    <ul>
      <li><a href="../../user/deployment/installing.html" class="page">Installing</a></li>
      <li><a href="../../user/deployment/deploying.html" class="page">Deploying a stateful service</a></li>
      <li><a href="../../user/deployment/stores/index.html" class="page">Stateful stores</a></li>
      <li><a href="../../user/deployment/monitoring.html" class="page">Monitoring</a></li>
      <li><a href="../../user/deployment/autoscaling.html" class="page">Autoscaling</a></li>
      <li><a href="../../user/deployment/security.html" class="page">Security</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../spec/index.html" class="page">Protocol Specification</a></li>
  <li><a href="../../developer/index.html" class="page">Content for developers of Cloudstate</a>
  <ul>
    <li><a href="../../developer/thebuild.html" class="page">The Cloudstate Build</a></li>
    <li><a href="../../developer/language-support/index.html" class="page">Language support</a>
    <ul>
      <li><a href="../../developer/language-support/serialization.html" class="page">Cloudstate serialization convention</a></li>
    </ul></li>
  </ul></li>
</ul>
</div>
</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<span id="version-warning"></span>

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../../index.html">Cloudstate</a></li>
  <li><a href="../../user/index.html">Using Cloudstate</a></li>
  <li><a href="../../user/features/index.html">Overview</a></li>
  <li>Forwarding and effects</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#forwarding-and-effects" name="forwarding-and-effects" class="anchor"><span class="anchor-link"></span></a>Forwarding and effects</h1>
<p>A command may only act on one entity at a time. Sometimes however, you would like to update multiple entities in a single command. An example of this might be wanting to publish a message to a topic entity after an event sourced entity processes a command, to inform any watchers of that entity.</p>
<h2><a href="#forwarding-control-to-another-entity" name="forwarding-control-to-another-entity" class="anchor"><span class="anchor-link"></span></a>Forwarding control to another entity</h2>
<p>An entity may, rather than sending a reply to a command, forward it to another entity. This is done by sending a forward message back to the proxy, instructing the proxy which call on which entity should be invoked, and passing the message to invoke it with.</p>
<p>The command won&rsquo;t be forwarded until any state actions request by the command handler have successfully completed. It is the responsibility of the forwarded action to return a reply that matches the type of the original command handler. Forwards can be chained arbitrarily long.</p>
<h2><a href="#emitting-effects-on-another-entity" name="emitting-effects-on-another-entity" class="anchor"><span class="anchor-link"></span></a>Emitting effects on another entity</h2>
<p>An entity may also emit one or more effects. An effect is something whose result has no impact on the result of the current command - if it fails, the current command still succeeds. The result of the effect is therefore ignored. Effects are only performed after the successful completion of any state actions requested by the command handler.</p>
<p>Effects may be declared as synchronous or asynchronous. Asynchronous commands are fired and forgotten - command processing continues while the command is being asynchronously processed. Meanwhile, synchronous commands are processed synchronously, one at a time, and the final result of the command handler, either a reply or a forward, is not sent until all synchronous commands are completed.</p>
<h2><a href="#transactional-concerns" name="transactional-concerns" class="anchor"><span class="anchor-link"></span></a>Transactional concerns</h2>
<p>It&rsquo;s important to note that forwarded commands, and commands emitted as side effects, are not transactionally completed. If the user function or store fails while a forwarded command is executing, the original command that triggered it will not be rolled back. Hence, forwarding and effects should not be used to update multiple entities at once if partial updates is a problem. In such cases, it&rsquo;s best to initiate commands from an event log consumer (future Cloudstate functionality), which can guarantee that a sequence of operations will run through to completion.</p>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/cloudstateio/cloudstate/tree/master/docs/src/main/paradox/user/features/effects.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="../../user/lang/index.html">Languages</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../../user/features/effects.html#forwarding-and-effects" class="header">Forwarding and effects</a>
  <ul>
    <li><a href="../../user/features/effects.html#forwarding-control-to-another-entity" class="header">Forwarding control to another entity</a></li>
    <li><a href="../../user/features/effects.html#emitting-effects-on-another-entity" class="header">Emitting effects on another entity</a></li>
    <li><a href="../../user/features/effects.html#transactional-concerns" class="header">Transactional concerns</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<a href="../../.."><img src="../../images/cloudstate-stacked-white.svg"></a>
<p>© Cloudstate 2019 | <a href="../../../privacy/">Privacy Policy</a> | <a class="optanon-toggle-display">Cookie Settings</a></p>

</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../js/magellan.js"></script>

<style type="text/css">@import "../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>


</html>
